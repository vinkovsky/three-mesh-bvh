var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},o={},i=t.parcelRequire4485;null==i&&((i=function(t){if(t in e)return e[t].exports;if(t in o){var i=o[t];delete o[t];var n={id:t,exports:{}};return e[t]=n,i.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){o[t]=e},t.parcelRequire4485=i),i.register("1h7P3",(function(t,e){var o,n,s,a;o=t.exports,n="TransformControls",s=()=>M,Object.defineProperty(o,n,{get:s,set:a,enumerable:!0,configurable:!0});var r=i("hGT0Q");const h=new r.Raycaster,l=new r.Vector3,c=new r.Vector3,p=new r.Quaternion,d={X:new r.Vector3(1,0,0),Y:new r.Vector3(0,1,0),Z:new r.Vector3(0,0,1)},m={type:"change"},u={type:"mouseDown"},w={type:"mouseUp",mode:null},y={type:"objectChange"};class M extends r.Object3D{constructor(t,e){super(),void 0===e&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),this.visible=!1,this.domElement=e,this.domElement.style.touchAction="none";const o=new q;this._gizmo=o,this.add(o);const i=new j;this._plane=i,this.add(i);const n=this;function s(t,e){let s=e;Object.defineProperty(n,t,{get:function(){return void 0!==s?s:e},set:function(e){s!==e&&(s=e,i[t]=e,o[t]=e,n.dispatchEvent({type:t+"-changed",value:e}),n.dispatchEvent(m))}}),n[t]=e,i[t]=e,o[t]=e}s("camera",t),s("object",void 0),s("enabled",!0),s("axis",null),s("mode","translate"),s("translationSnap",null),s("rotationSnap",null),s("scaleSnap",null),s("space","world"),s("size",1),s("dragging",!1),s("showX",!0),s("showY",!0),s("showZ",!0);const a=new r.Vector3,h=new r.Vector3,l=new r.Quaternion,c=new r.Quaternion,p=new r.Vector3,d=new r.Quaternion,u=new r.Vector3,w=new r.Vector3,y=new r.Vector3,M=new r.Vector3;s("worldPosition",a),s("worldPositionStart",h),s("worldQuaternion",l),s("worldQuaternionStart",c),s("cameraPosition",p),s("cameraQuaternion",d),s("pointStart",u),s("pointEnd",w),s("rotationAxis",y),s("rotationAngle",0),s("eye",M),this._offset=new r.Vector3,this._startNorm=new r.Vector3,this._endNorm=new r.Vector3,this._cameraScale=new r.Vector3,this._parentPosition=new r.Vector3,this._parentQuaternion=new r.Quaternion,this._parentQuaternionInv=new r.Quaternion,this._parentScale=new r.Vector3,this._worldScaleStart=new r.Vector3,this._worldQuaternionInv=new r.Quaternion,this._worldScale=new r.Vector3,this._positionStart=new r.Vector3,this._quaternionStart=new r.Quaternion,this._scaleStart=new r.Vector3,this._getPointer=b.bind(this),this._onPointerDown=v.bind(this),this._onPointerHover=x.bind(this),this._onPointerMove=f.bind(this),this._onPointerUp=P.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(t){if(void 0===this.object||!0===this.dragging)return;h.setFromCamera(t,this.camera);const e=g(this._gizmo.picker[this.mode],h);this.axis=e?e.object.name:null}pointerDown(t){if(void 0!==this.object&&!0!==this.dragging&&0===t.button&&null!==this.axis){h.setFromCamera(t,this.camera);const e=g(this._plane,h,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,u.mode=this.mode,this.dispatchEvent(u)}}pointerMove(t){const e=this.axis,o=this.mode,i=this.object;let n=this.space;if("scale"===o?n="local":"E"!==e&&"XYZE"!==e&&"XYZ"!==e||(n="world"),void 0===i||null===e||!1===this.dragging||-1!==t.button)return;h.setFromCamera(t,this.camera);const s=g(this._plane,h,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),"translate"===o)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===n&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===n&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),i.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===n&&(i.position.applyQuaternion(p.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(this._quaternionStart)),"world"===n&&(i.parent&&i.position.add(l.setFromMatrixPosition(i.parent.matrixWorld)),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(l.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===o){if(-1!==e.search("XYZ")){let t=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(t*=-1),c.set(t,t,t)}else l.copy(this.pointStart),c.copy(this.pointEnd),l.applyQuaternion(this._worldQuaternionInv),c.applyQuaternion(this._worldQuaternionInv),c.divide(l),-1===e.search("X")&&(c.x=1),-1===e.search("Y")&&(c.y=1),-1===e.search("Z")&&(c.z=1);i.scale.copy(this._scaleStart).multiply(c),this.scaleSnap&&(-1!==e.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===o){this._offset.copy(this.pointEnd).sub(this.pointStart);const t=20/this.worldPosition.distanceTo(l.setFromMatrixPosition(this.camera.matrixWorld));"E"===e?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(l.copy(this.rotationAxis).cross(this.eye))*t):"X"!==e&&"Y"!==e&&"Z"!==e||(this.rotationAxis.copy(d[e]),l.copy(d[e]),"local"===n&&l.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(l.cross(this.eye).normalize())*t),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===n&&"E"!==e&&"XYZE"!==e?(i.quaternion.copy(this._quaternionStart),i.quaternion.multiply(p.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),i.quaternion.copy(p.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),i.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(m),this.dispatchEvent(y)}}pointerUp(t){0===t.button&&(this.dragging&&null!==this.axis&&(w.mode=this.mode,this.dispatchEvent(w)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))}attach(t){return this.object=t,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}getRaycaster(){return h}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function b(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};{const e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}}function x(t){if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t))}}function v(t){this.enabled&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function f(t){this.enabled&&this.pointerMove(this._getPointer(t))}function P(t){this.enabled&&(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function g(t,e,o){const i=e.intersectObject(t,!0);for(let t=0;t<i.length;t++)if(i[t].object.visible||o)return i[t];return!1}M.prototype.isTransformControls=!0;const S=new r.Euler,_=new r.Vector3(0,1,0),E=new r.Vector3(0,0,0),I=new r.Matrix4,Q=new r.Quaternion,X=new r.Quaternion,Y=new r.Vector3,Z=new r.Matrix4,G=new r.Vector3(1,0,0),A=new r.Vector3(0,1,0),z=new r.Vector3(0,0,1),T=new r.Vector3,C=new r.Vector3,V=new r.Vector3;class q extends r.Object3D{constructor(){super(),this.type="TransformControlsGizmo";const t=new r.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new r.LineBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),o=t.clone();o.opacity=.15;const i=e.clone();i.opacity=.5;const n=t.clone();n.color.setHex(16711680);const s=t.clone();s.color.setHex(65280);const a=t.clone();a.color.setHex(255);const h=t.clone();h.color.setHex(16711680),h.opacity=.5;const l=t.clone();l.color.setHex(65280),l.opacity=.5;const c=t.clone();c.color.setHex(255),c.opacity=.5;const p=t.clone();p.opacity=.25;const d=t.clone();d.color.setHex(16776960),d.opacity=.25;t.clone().color.setHex(16776960);const m=t.clone();m.color.setHex(7895160);const u=new r.CylinderGeometry(0,.04,.1,12);u.translate(0,.05,0);const w=new r.BoxGeometry(.08,.08,.08);w.translate(0,.04,0);const y=new r.BufferGeometry;y.setAttribute("position",new r.Float32BufferAttribute([0,0,0,1,0,0],3));const M=new r.CylinderGeometry(.0075,.0075,.5,3);function b(t,e){const o=new r.TorusGeometry(t,.0075,3,64,e*Math.PI*2);return o.rotateY(Math.PI/2),o.rotateX(Math.PI/2),o}M.translate(0,.25,0);const x={X:[[new r.Mesh(u,n),[.5,0,0],[0,0,-Math.PI/2]],[new r.Mesh(u,n),[-.5,0,0],[0,0,Math.PI/2]],[new r.Mesh(M,n),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new r.Mesh(u,s),[0,.5,0]],[new r.Mesh(u,s),[0,-.5,0],[Math.PI,0,0]],[new r.Mesh(M,s)]],Z:[[new r.Mesh(u,a),[0,0,.5],[Math.PI/2,0,0]],[new r.Mesh(u,a),[0,0,-.5],[-Math.PI/2,0,0]],[new r.Mesh(M,a),null,[Math.PI/2,0,0]]],XYZ:[[new r.Mesh(new r.OctahedronGeometry(.1,0),p.clone()),[0,0,0]]],XY:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),c.clone()),[.15,.15,0]]],YZ:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},v={X:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[.3,0,0],[0,0,-Math.PI/2]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[0,.3,0]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[0,-.3,0],[0,0,Math.PI]]],Z:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[0,0,.3],[Math.PI/2,0,0]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new r.Mesh(new r.OctahedronGeometry(.2,0),o)]],XY:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),o),[.15,.15,0]]],YZ:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),o),[.15,0,.15],[-Math.PI/2,0,0]]]},f={START:[[new r.Mesh(new r.OctahedronGeometry(.01,2),i),null,null,null,"helper"]],END:[[new r.Mesh(new r.OctahedronGeometry(.01,2),i),null,null,null,"helper"]],DELTA:[[new r.Line(function(){const t=new r.BufferGeometry;return t.setAttribute("position",new r.Float32BufferAttribute([0,0,0,1,1,1],3)),t}(),i),null,null,null,"helper"]],X:[[new r.Line(y,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new r.Line(y,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new r.Line(y,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},P={XYZE:[[new r.Mesh(b(.5,1),m),null,[0,Math.PI/2,0]]],X:[[new r.Mesh(b(.5,.5),n)]],Y:[[new r.Mesh(b(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new r.Mesh(b(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new r.Mesh(b(.75,1),d),null,[0,Math.PI/2,0]]]},g={AXIS:[[new r.Line(y,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},S={XYZE:[[new r.Mesh(new r.SphereGeometry(.25,10,8),o)]],X:[[new r.Mesh(new r.TorusGeometry(.5,.1,4,24),o),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new r.Mesh(new r.TorusGeometry(.5,.1,4,24),o),[0,0,0],[Math.PI/2,0,0]]],Z:[[new r.Mesh(new r.TorusGeometry(.5,.1,4,24),o),[0,0,0],[0,0,-Math.PI/2]]],E:[[new r.Mesh(new r.TorusGeometry(.75,.1,2,24),o)]]},_={X:[[new r.Mesh(w,n),[.5,0,0],[0,0,-Math.PI/2]],[new r.Mesh(M,n),[0,0,0],[0,0,-Math.PI/2]],[new r.Mesh(w,n),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new r.Mesh(w,s),[0,.5,0]],[new r.Mesh(M,s)],[new r.Mesh(w,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new r.Mesh(w,a),[0,0,.5],[Math.PI/2,0,0]],[new r.Mesh(M,a),[0,0,0],[Math.PI/2,0,0]],[new r.Mesh(w,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),c),[.15,.15,0]]],YZ:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new r.Mesh(new r.BoxGeometry(.1,.1,.1),p.clone())]]},E={X:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[.3,0,0],[0,0,-Math.PI/2]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[0,.3,0]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[0,-.3,0],[0,0,Math.PI]]],Z:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[0,0,.3],[Math.PI/2,0,0]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),o),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),o),[.15,.15,0]]],YZ:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),o),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new r.Mesh(new r.BoxGeometry(.2,.2,.2),o),[0,0,0]]]},I={X:[[new r.Line(y,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new r.Line(y,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new r.Line(y,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function Q(t){const e=new r.Object3D;for(const o in t)for(let i=t[o].length;i--;){const n=t[o][i][0].clone(),s=t[o][i][1],a=t[o][i][2],r=t[o][i][3],h=t[o][i][4];n.name=o,n.tag=h,s&&n.position.set(s[0],s[1],s[2]),a&&n.rotation.set(a[0],a[1],a[2]),r&&n.scale.set(r[0],r[1],r[2]),n.updateMatrix();const l=n.geometry.clone();l.applyMatrix4(n.matrix),n.geometry=l,n.renderOrder=1/0,n.position.set(0,0,0),n.rotation.set(0,0,0),n.scale.set(1,1,1),e.add(n)}return e}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=Q(x)),this.add(this.gizmo.rotate=Q(P)),this.add(this.gizmo.scale=Q(_)),this.add(this.picker.translate=Q(v)),this.add(this.picker.rotate=Q(S)),this.add(this.picker.scale=Q(E)),this.add(this.helper.translate=Q(f)),this.add(this.helper.rotate=Q(g)),this.add(this.helper.scale=Q(I)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){const e="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:X;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let o=[];o=o.concat(this.picker[this.mode].children),o=o.concat(this.gizmo[this.mode].children),o=o.concat(this.helper[this.mode].children);for(let t=0;t<o.length;t++){const i=o[t];let n;if(i.visible=!0,i.rotation.set(0,0,0),i.position.copy(this.worldPosition),n=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),i.scale.set(1,1,1).multiplyScalar(n*this.size/4),"helper"!==i.tag){if(i.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode){const t=.99,o=.2;"X"===i.name&&Math.abs(_.copy(G).applyQuaternion(e).dot(this.eye))>t&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Y"===i.name&&Math.abs(_.copy(A).applyQuaternion(e).dot(this.eye))>t&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Z"===i.name&&Math.abs(_.copy(z).applyQuaternion(e).dot(this.eye))>t&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XY"===i.name&&Math.abs(_.copy(z).applyQuaternion(e).dot(this.eye))<o&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"YZ"===i.name&&Math.abs(_.copy(G).applyQuaternion(e).dot(this.eye))<o&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XZ"===i.name&&Math.abs(_.copy(A).applyQuaternion(e).dot(this.eye))<o&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1)}else"rotate"===this.mode&&(Q.copy(e),_.copy(this.eye).applyQuaternion(p.copy(e).invert()),-1!==i.name.search("E")&&i.quaternion.setFromRotationMatrix(I.lookAt(this.eye,E,A)),"X"===i.name&&(p.setFromAxisAngle(G,Math.atan2(-_.y,_.z)),p.multiplyQuaternions(Q,p),i.quaternion.copy(p)),"Y"===i.name&&(p.setFromAxisAngle(A,Math.atan2(_.x,_.z)),p.multiplyQuaternions(Q,p),i.quaternion.copy(p)),"Z"===i.name&&(p.setFromAxisAngle(z,Math.atan2(_.y,_.x)),p.multiplyQuaternions(Q,p),i.quaternion.copy(p)));i.visible=i.visible&&(-1===i.name.indexOf("X")||this.showX),i.visible=i.visible&&(-1===i.name.indexOf("Y")||this.showY),i.visible=i.visible&&(-1===i.name.indexOf("Z")||this.showZ),i.visible=i.visible&&(-1===i.name.indexOf("E")||this.showX&&this.showY&&this.showZ),i.material._color=i.material._color||i.material.color.clone(),i.material._opacity=i.material._opacity||i.material.opacity,i.material.color.copy(i.material._color),i.material.opacity=i.material._opacity,this.enabled&&this.axis&&(i.name===this.axis||this.axis.split("").some((function(t){return i.name===t})))&&(i.material.color.setHex(16776960),i.material.opacity=1)}else i.visible=!1,"AXIS"===i.name?(i.position.copy(this.worldPositionStart),i.visible=!!this.axis,"X"===this.axis&&(p.setFromEuler(S.set(0,0,0)),i.quaternion.copy(e).multiply(p),Math.abs(_.copy(G).applyQuaternion(e).dot(this.eye))>.9&&(i.visible=!1)),"Y"===this.axis&&(p.setFromEuler(S.set(0,0,Math.PI/2)),i.quaternion.copy(e).multiply(p),Math.abs(_.copy(A).applyQuaternion(e).dot(this.eye))>.9&&(i.visible=!1)),"Z"===this.axis&&(p.setFromEuler(S.set(0,Math.PI/2,0)),i.quaternion.copy(e).multiply(p),Math.abs(_.copy(z).applyQuaternion(e).dot(this.eye))>.9&&(i.visible=!1)),"XYZE"===this.axis&&(p.setFromEuler(S.set(0,Math.PI/2,0)),_.copy(this.rotationAxis),i.quaternion.setFromRotationMatrix(I.lookAt(E,_,A)),i.quaternion.multiply(p),i.visible=this.dragging),"E"===this.axis&&(i.visible=!1)):"START"===i.name?(i.position.copy(this.worldPositionStart),i.visible=this.dragging):"END"===i.name?(i.position.copy(this.worldPosition),i.visible=this.dragging):"DELTA"===i.name?(i.position.copy(this.worldPositionStart),i.quaternion.copy(this.worldQuaternionStart),l.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),l.applyQuaternion(this.worldQuaternionStart.clone().invert()),i.scale.copy(l),i.visible=this.dragging):(i.quaternion.copy(e),this.dragging?i.position.copy(this.worldPositionStart):i.position.copy(this.worldPosition),this.axis&&(i.visible=-1!==this.axis.search(i.name)))}super.updateMatrixWorld(t)}}q.prototype.isTransformControlsGizmo=!0;class j extends r.Mesh{constructor(){super(new r.PlaneGeometry(1e5,1e5,2,2),new r.MeshBasicMaterial({visible:!1,wireframe:!0,side:r.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),T.copy(G).applyQuaternion("local"===e?this.worldQuaternion:X),C.copy(A).applyQuaternion("local"===e?this.worldQuaternion:X),V.copy(z).applyQuaternion("local"===e?this.worldQuaternion:X),_.copy(C),this.mode){case"translate":case"scale":switch(this.axis){case"X":_.copy(this.eye).cross(T),Y.copy(T).cross(_);break;case"Y":_.copy(this.eye).cross(C),Y.copy(C).cross(_);break;case"Z":_.copy(this.eye).cross(V),Y.copy(V).cross(_);break;case"XY":Y.copy(V);break;case"YZ":Y.copy(T);break;case"XZ":_.copy(V),Y.copy(C);break;case"XYZ":case"E":Y.set(0,0,0)}break;default:Y.set(0,0,0)}0===Y.length()?this.quaternion.copy(this.cameraQuaternion):(Z.lookAt(l.set(0,0,0),Y,_),this.quaternion.setFromRotationMatrix(Z)),super.updateMatrixWorld(t)}}j.prototype.isTransformControlsPlane=!0}));
//# sourceMappingURL=distancecast.708c3e46.js.map
